# 🚇 지하철 혼잡도 대시보드

서울교통공사 지하철 1~8호선의 시간대별 혼잡도를 시각화하는 Streamlit 대시보드입니다.

## 📊 프로젝트 소개

이 프로젝트는 서울교통공사에서 제공하는 지하철 혼잡도 정보를 분석하고 시각화하여, 사용자가 효율적으로 지하철 이용 계획을 세울 수 있도록 돕습니다.

### 주요 기능

#### 📊 3개 메뉴 구조
- **📈 역 상세 분석**: 특정 역의 KPI 요약 + 시간대별 혼잡도 라인차트
- **🏆 전체 혼잡도 랭킹**: 모든 노선의 출퇴근 시간대 Top N 혼잡역
- **📊 노선별 분석**: 특정 노선의 히트맵 + 역 선택 시 상세 차트

#### ✨ 핵심 기능
- ✅ **KPI 요약 카드**: 전체 통계 한눈에 보기 (총 역 수, 평균 혼잡도, 최고 혼잡역, 피크 시간대)
- 📈 **역 상세 라인차트**: 특정 역의 시간대별 혼잡도 변화 추이
- 🔥 **히트맵**: 호선 전체 역의 시간대별 혼잡도 비교
- 🏆 **Top N 랭킹**: 출퇴근 시간대 가장 혼잡한 역 순위
- 🔍 **동적 필터링**: 메뉴별 독립적인 필터 시스템
- 🎯 **인터랙티브 차트**: 역 선택 시 라인차트 자동 업데이트

## 🚀 시작하기

### 사전 요구사항

- Python 3.8 이상
- pip (Python 패키지 관리자)

### 설치 방법

```bash
# 저장소 클론
git clone https://github.com/klovelyflo-coder/multicampus-moon.git

# 프로젝트 디렉토리로 이동
cd multicampus-moon

# 의존성 설치
pip install -r requirements.txt
```

### 실행 방법

```bash
# Streamlit 앱 실행
streamlit run app.py
```

브라우저가 자동으로 열리며, `http://localhost:8501`에서 대시보드를 확인할 수 있습니다.

## 📁 프로젝트 구조

```
multicampus-moon/
├── README.md                                    # 프로젝트 소개
├── requirements.txt                             # Python 패키지 목록
├── data_preprocessing.py                        # 데이터 전처리 스크립트
├── app.py                                       # Streamlit 대시보드
├── 서울교통공사_지하철혼잡도정보_20250930.csv    # 원본 데이터
├── data/                                        # 정제된 데이터
│   ├── subway_crowding_tidy.csv
│   ├── subway_crowding_tidy.parquet
│   └── quality_report.json
└── docs/                                        # 프로젝트 문서
    ├── project_requirements.md                  # 초기 요구사항
    └── development_history.md                   # 개발 히스토리
```

## 🎯 개발 단계별 진행 상황

| Phase | 기능 | Git Tag | 상태 |
|-------|------|---------|------|
| Phase 1 | 데이터 전처리 및 정제 | `phase1-complete` | ✅ 완료 |
| Phase 2 | 역 상세 라인차트 | `phase2-complete` | ✅ 완료 |
| Phase 3 | 역-시간대 히트맵 | `phase3-complete` | ✅ 완료 |
| Phase 4 | Top N 랭킹 | `phase4-complete` | ✅ 완료 |
| Phase 5 | KPI 요약 카드 | `phase5-kpi-complete` | ✅ 완료 |

### Phase 별 주요 구현 내용

#### Phase 1: 데이터 전처리
- Wide → Long 포맷 변환
- 시간대 정규화 및 정렬
- 데이터 품질 검증 (중복, 음수, 결측치)
- CSV/Parquet 형식으로 저장

#### Phase 2: 역 상세 라인차트
- Streamlit 기반 웹 대시보드 구축
- 동적 필터링 (요일/호선/역/방향)
- Plotly를 활용한 인터랙티브 라인차트
- 출퇴근 시간대 시각적 강조

#### Phase 3: 히트맵
- 역×시간대 혼잡도 히트맵
- 다양한 정렬 옵션 (평균 혼잡도순, 가나다순, 역 코드순)
- 히트맵 셀 클릭 시 해당 역 라인차트 연동

#### Phase 4: Top N 랭킹
- 출근/퇴근 시간대별 혼잡 순위
- 상위 N개 역 조회 (슬라이더로 조정 가능)
- 랭킹 테이블 및 바 차트 시각화
- 랭킹 클릭 시 해당 역 라인차트 연동

#### Phase 5: KPI 요약 카드
- 전체 통계 요약 (총 역 수, 평균 혼잡도, 최고 혼잡역, 피크 시간대)
- 출퇴근 시간대 평균 혼잡도
- 필터 변경 시 실시간 업데이트

### 📅 개발 타임라인

```
2024-12
├── 🎯 Phase 1: 데이터 정제 완료
├── 📈 Phase 2: 라인차트 대시보드 구현
├── 🔥 Phase 3: 히트맵 시각화 추가
├── 🏆 Phase 4: Top N 랭킹 기능 구현
├── 📊 Phase 5: KPI 요약 카드 추가
├── ✨ UI 개선 1차: 탭 구조 리팩토링
│   ├── 사이드바 라디오 버튼 메뉴
│   ├── 메뉴별 독립적 필터 시스템
│   ├── 차트 높이 최적화
│   └── 스크롤 최소화
└── ✨ UI 개선 2차: 사용자 경험 향상
    ├── 평일/주말 구분 로직 (출퇴근 시간대 선택)
    ├── 히트맵 높이 자동 조정 (역당 40px)
    └── 역별 Expander로 상세 차트 제공
```

**최신 개선**: 평일/주말 구분 및 역별 상세 차트

> 📖 상세한 개발 과정은 [`docs/development_history.md`](docs/development_history.md)를 참고하세요.

## 🛠️ 기술 스택

- **언어**: Python 3.8+
- **프레임워크**: Streamlit
- **데이터 처리**: Pandas, NumPy
- **시각화**: Plotly Express
- **버전 관리**: Git, GitHub

## 📝 데이터 출처

- **데이터 제공**: 서울교통공사
- **데이터명**: 지하철혼잡도정보
- **기준일**: 2025년 9월 30일
- **포함 노선**: 1~8호선

## 🔍 주요 화면

### 1. KPI 요약 카드
선택한 호선과 방향의 전체 통계를 한눈에 확인

### 2. 역 상세 라인차트
특정 역의 시간대별 혼잡도 변화를 라인차트로 표시

### 3. 히트맵
전체 역의 시간대별 혼잡도를 색상으로 비교

### 4. Top N 랭킹
출퇴근 시간대 가장 혼잡한 역 순위 및 바 차트

## 📖 사용 방법

### 1. 사이드바에서 메뉴 선택
- 📈 **역 상세 분석**: 특정 역의 혼잡도 분석
- 🏆 **전체 혼잡도 랭킹**: 모든 노선의 혼잡역 순위
- 📊 **노선별 분석**: 특정 노선의 히트맵 분석

### 2. 각 메뉴별 사용법

#### 📈 역 상세 분석
1. 사이드바 필터에서 요일, 호선, 역, 방향 선택
2. KPI 카드에서 전체 통계 확인
3. 라인차트로 시간대별 혼잡도 추이 분석

#### 🏆 전체 혼잡도 랭킹
1. 요일 선택
2. 출근/퇴근 시간대 선택
3. Top N 슬라이더로 표시할 역 수 조정
4. 랭킹 테이블과 막대 차트로 혼잡역 확인

#### 📊 노선별 분석
1. 분석할 호선, 요일, 방향 선택
2. 히트맵에서 역×시간대 혼잡도 한눈에 확인
3. 역 선택 시 해당 역의 상세 라인차트 표시

## 📄 라이선스

이 프로젝트는 교육 목적으로 제작되었습니다.

## 👥 개발자

Multicampus Moon 프로젝트 팀

## 📞 문의

프로젝트 관련 문의사항이 있으시면 GitHub Issues를 통해 연락주세요.

---

**프로젝트 버전**: 1.0  
**최종 업데이트**: 2025-12-16  
**개발 기간**: Phase 1~5 완료
